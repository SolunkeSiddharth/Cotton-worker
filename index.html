<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cotton Workers Tracker - ‡§ï‡§™‡§æ‡§∏ ‡§ï‡§æ‡§Æ‡§ó‡§æ‡§∞ ‡§ü‡•ç‡§∞‡•à‡§ï‡§∞</title>
    <link rel="stylesheet" href="style.css">
    <!-- jsPDF library with autoTable plugin -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <!-- Unicode font support for Marathi -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Noto Sans Devanagari', Arial, sans-serif;
        }

        /* Ensure proper rendering of Devanagari script */
        .marathi-text {
            font-family: 'Noto Sans Devanagari', Arial, sans-serif;
            font-feature-settings: "kern" 1, "liga" 1;
        }

        input[type="text"], textarea {
            font-family: 'Noto Sans Devanagari', Arial, sans-serif;
        }

        /* PDF generation status */
        .pdf-status {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(220, 53, 69, 0.95);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 10000;
            text-align: center;
            display: none;
        }
    </style>
</head>
<body>
    <!-- PDF Generation Status -->
    <div id="pdf-status" class="pdf-status">
        <p>üìÑ Generating PDF...</p>
        <p>Please wait...</p>
    </div>

    <div class="app-container">
        <!-- Header -->
        <div class="header-section">
            <h1 class="app-title">üå± Cotton Workers Tracker</h1>
            <p class="app-subtitle">‡§ï‡§™‡§æ‡§∏ ‡§ï‡§æ‡§Æ‡§ó‡§æ‡§∞ ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ</p>
        </div>

        <!-- Navigation -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="current">
                üìù Current Session
            </button>
            <button class="tab-btn" data-tab="history">
                üìö History
            </button>
        </div>

        <!-- Current Session Tab -->
        <div id="current-tab" class="tab-content active">
            <!-- Worker Entry Form -->
            <div class="section-card">
                <div class="card-header">
                    <h3>‚ûï Add Worker Entry</h3>
                    <p>‡§®‡§Ø‡§æ ‡§ï‡§æ‡§Æ‡§ó‡§æ‡§∞ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</p>
                </div>
                <div class="form-group">
                    <label for="worker-name">Worker Name (‡§ï‡§æ‡§Æ‡§ó‡§æ‡§∞ ‡§ï‡§æ ‡§®‡§æ‡§Æ):</label>
                    <input type="text" id="worker-name" placeholder="Enter worker name / ‡§ï‡§æ‡§Æ‡§ó‡§æ‡§∞ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" class="marathi-text">
                </div>
                <div class="form-group">
                    <label for="kg-collected">KG Collected (‡§è‡§ï‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§ø‡§≤‡•ã):</label>
                    <input type="text" id="kg-collected" placeholder="e.g., 10+5*2 or 25.5">
                    <small>You can use math: 10+5, 20*1.5, (15+10)/2</small>
                </div>
                <div class="form-group">
                    <label for="rate-per-kg">Rate per KG (‡§™‡•ç‡§∞‡§§‡§ø ‡§ï‡§ø‡§≤‡•ã ‡§¶‡§∞):</label>
                    <input type="number" id="rate-per-kg" value="50" min="0" step="0.01">
                </div>
                <div class="form-group">
                    <label for="work-date">Work Date (‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§§‡§ø‡§•‡§ø):</label>
                    <input type="date" id="work-date">
                </div>
                <button id="add-worker-btn" class="btn btn--primary">
                    ‚ûï Add Entry
                </button>
            </div>

            <!-- Current Session Summary -->
            <div class="section-card">
                <div class="card-header">
                    <h3>üìä Today's Summary</h3>
                </div>
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="summary-label">Total KG</div>
                        <div class="summary-value" id="current-total-kg">0.00</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">Total Amount</div>
                        <div class="summary-value">‚Çπ<span id="current-total-amount">0.00</span></div>
                    </div>
                </div>
                <button id="complete-day-btn" class="btn btn--success hidden">
                    ‚úÖ Complete Day
                </button>
            </div>

            <!-- Current Entries Table -->
            <div class="section-card">
                <div class="card-header">
                    <h3>üìã Current Entries</h3>
                </div>
                <div class="table-container">
                    <table id="current-entries-table" class="entries-table">
                        <thead>
                            <tr>
                                <th>Worker Name</th>
                                <th>KG</th>
                                <th>Rate</th>
                                <th>Total</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Current entries will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- History Tab -->
        <div id="history-tab" class="tab-content">
            <div class="section-card">
                <div class="card-header">
                    <h3>üìö History Records</h3>
                    <button id="generate-report-btn" class="btn btn--outline">
                        üìÑ Generate Full Report
                    </button>
                </div>
                <div id="history-list">
                    <!-- History records will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p>Loading...</p>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
        <span id="toast-message"></span>
    </div>

    <!-- Confirm Modal -->
    <div id="confirm-modal" class="modal hidden">
        <div class="modal-content">
            <h3 id="confirm-title"></h3>
            <p id="confirm-message"></p>
            <div class="modal-actions">
                <button id="confirm-cancel" class="btn btn--outline">Cancel</button>
                <button id="confirm-ok" class="btn btn--primary">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Edit Entry</h3>
            <div class="form-group">
                <label for="edit-name">Worker Name:</label>
                <input type="text" id="edit-name" class="marathi-text">
            </div>
            <div class="form-group">
                <label for="edit-kg">KG:</label>
                <input type="number" id="edit-kg" min="0" step="0.01">
            </div>
            <div class="modal-actions">
                <button id="edit-cancel" class="btn btn--outline">Cancel</button>
                <button id="edit-save" class="btn btn--primary">Save</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>